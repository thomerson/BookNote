## 消息模型

* [基本消费模型](#基本消费模型)

* [Work消息模型](#work消息模型)

* [订阅模型](#订阅模型)

### 基本消费模型

![基本消息模型](https://s2.loli.net/2022/04/23/zCWKLdlsXED5rxG.png)


###  Work消息模型

在工人之间分配任务（工作队列或者竞争消费者模式）

![work消息模型](https://s2.loli.net/2022/04/23/qzIKRxhprB3GSgZ.png)


此消息模型的好处在于如果你积压了任务，我们只需要添加更多的工作者就可以了。默认情况下，RabbitMQ 会按顺序将每条消息发送给下一个消费者。平均而言，每个消费者都会收到相同数量的消息。这种分发消息的方式称为循环（**循环调度**）。

### 订阅模型

生产者向交换器发送消息，从不直接向队列发送任何消息


![订阅模型](https://s2.loli.net/2022/04/23/Ip4Skn3NyMXA82b.png)

3种常用的交换器类型

* direct：定向，把消息交给符合指定routing key 的队列

* topic：通配符，把消息交给符合routing pattern（路由模式） 的队列

    单词列表，由点分隔，例如```stock.usd.nyse```

    <br>"*"可以只替换一个单词。
    "#"可以代替零个或多个单词。
    <br>

* fanout：广播，将消息交给所有绑定到交换机的队列

Exchange（交换机）只负责转发消息，不具备存储消息的能力，因此如果没有任何队列与Exchange绑定，或者没有符合路由规则的队列，那么消息会丢失！

