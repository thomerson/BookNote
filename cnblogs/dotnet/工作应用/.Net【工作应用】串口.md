## 概念

* 波特率

  在串口通讯中两个串口之间通讯之间的信号单元叫做码元

* 数据位和停止位

  在传递数据过程之前，机器会识别你的数据是个啥，然后根据这个类型，去调整不同的起始位、停止位

* 奇偶校验

<!-- TODO -->

<!-- https://zhuanlan.zhihu.com/p/478710212 -->

## 串口通信

典型的串口通信使用3根线完成，分别是地线、发送、接收。

![串口通信](https://pic1.zhimg.com/80/v2-cb92fb2b28bfcfc8b6bf14ea659c02c0_720w.webp)


### 通讯协议

```RS```/```Recommended Standard```/推荐标准

* RS232


* RS485



#### RS232

* 可以实现点对点的通信方式，但这种方式不能实现联网功能

  RS232标准采用的接口是9针或25针的D型插头，常用的一般是9针插头

  rs232（9针）接口
  ![RS232](https://bkimg.cdn.bcebos.com/pic/d009b3de9c82d1587b429de9800a19d8bd3e42a2?x-bce-process=image/resize,m_lfit,w_400,limit_1)

#### RS485

* 传输速度可以达到10Mb/s以上，传输距离可以达到3000米左右

* RS-485和RS-232的单端传输不一样，是**差分传输**，使用一对双绞线，其中一根线定义为A，另一个定义为B

  ![双绞线](https://pic4.zhimg.com/80/v2-83d1b60631e11ca380e2c79ced1bc72f_720w.webp)

### 波特率

**波特率是指数据信号对载波的调制速率，它用单位时间内载波调制状态改变的次数来表示**

比如波特率为9600bps；代表的就是每秒中传输9600bit，也就是相当于每一秒中划分成了9600等份。

两台设备要想实现串口通讯，这收发端设置的波特率必须相同，否则是没办法实现通讯的。


### 串口通讯的数据结构

![串口通信数据结构](https://pic4.zhimg.com/80/v2-bfad8d6eb013f5b73c7a3414741e1287_720w.webp)

* 起始位

  起始位必须是持续一个比特时间的**逻辑0电平**，标志传输一个字符的开始，接收方可用起始位使自己的接收时钟与发送方的数据同步。

* 数据位

  数据位紧跟在起始位之后，是通信中的真正有效信息。数据位的位数可以由通信双方共同约定。传输数据时先传送字符的低位，后传送字符的高位。

* 奇偶校验位

  奇偶校验位**仅占一位**，用于进行奇校验或偶校验，奇偶检验位**不是必须有的**。如果是奇校验，需要保证传输的数据总共有奇数个逻辑高位；如果是偶校验，需要保证传输的数据总共有偶数个逻辑高位。

* 停止位
  
  停止位可以是是1位、1.5位或2位，可以由软件设定。它一定是**逻辑1电平**，标志着传输一个字符的结束。

* 空闲位

  空闲位是指从一个字符的停止位结束到下一个字符的起始位开始，表示线路处于空闲状态，必须由**高电平**来填充。

### 单双工通讯


1. 单工

  数据传输只支持数据在一个方向上传输

2. 半双工

  允许数据在两个方向上传输，但某一时刻只允许数据在一个方向上传输，实际上是一种切换方向的单工通信，不需要独立的接收端和发送端，两者可合并为一个端口；

3. 全双工

  允许数据同时在两个方向上传输，因此全双工通信是两个单工方式的结合，需要独立的接收端和发送端。

![通信](https://pic1.zhimg.com/80/v2-1f82abaedf276981735b3684986e4310_720w.webp)

