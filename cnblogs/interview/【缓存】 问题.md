## 缓存雪崩

> 大量的key设置了**相同的过期时间**，导致缓存在同一时间全部失效，造成瞬时DB请求暴增，引起雪崩

### 解决方案

* 限流，降级，熔断

    * [Hystrix]
    * Sentinel
    * RateLimiter

* 随机过期时间
    > 比如设置8小时，设置为8±1random，均匀分布在7~9小时

* 缓存预热

## 缓存穿透

> **访问一个不在的key**，缓存不起作用，直接穿透到DB

### 解决方案

* 缓存key空值

* [BloomFilter/布隆过滤器]

## 缓存击穿

> **一个存在的key**,在**过期**的一刻，同时有大量的请求，这些请求会击穿到DB

### 解决方案

* 锁

在访问key之前，采用```SETNX```(set if not exists)来设置另一个短期key来锁住当前key的访问，访问结束再删除该短期key

缺点是是有等待，系统tps降低，用户体验差

