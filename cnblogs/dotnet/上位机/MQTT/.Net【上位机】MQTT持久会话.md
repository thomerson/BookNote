## MQTT持久会话

不稳定的网络及有限的硬件资源是物联网应用需要面对的两大难题，MQTT 客户端与服务器的连接可能随时会因为网络波动及资源限制而异常断开。为了解决网络连接断开对通信造成的影响，MQTT 协议提供了持久会话功能。

持久会话主要有以下三个作用：

1. 避免因网络中断导致需要反复订阅带来的额外开销。

2. 避免错过离线期间的消息。

3. 确保 QoS 1 和 QoS 2 的消息质量保证不被网络中断影响。


### Clean Session

Clean Session 是用来控制会话状态生命周期的标志位

* 为 true 时表示创建一个新的会话，在客户端断开连接时，会话将自动销毁。

* 为 false 时表示创建一个持久会话，在客户端断开连接后会话仍然保持，直到会话超时注销。

⭐持久会话能被恢复的前提是客户端使用固定的 Client ID 再次连接，如果 Client ID 是动态的，那么连接成功后将会创建一个新的持久会话。

防止一直连接，可以设置**超时时间**,**最大消息数**和b保存消息的**QoS**


