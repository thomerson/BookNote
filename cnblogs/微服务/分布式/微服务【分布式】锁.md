## 分布式锁实现方案

* redis

* 数据库

* zookeeper


## 基于数据库实现分布式锁

* 乐观锁

* 悲观锁 for update

## 基于缓存（redis等）实现分布式锁



redis实现主要依赖redis自身的原子操作，例如：


```shell
# 判断是否存在，不存在设置值，并提供自动过期时间
set key value NX PX millisecond

# 删除某个key
del key

```

```NX```：只有在建不存在时，才对键进行设置操作


## Zookeeper

CRUD


CQRS

Event sourcing
事件溯源


[https://www.cnblogs.com/wzh2010/p/15642452.html](https://www.cnblogs.com/wzh2010/p/15642452.html)