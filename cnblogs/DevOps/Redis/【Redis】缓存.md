## 缓存高并发出现的问题

* 击穿

    同一个key，缓存失效，大量请求直接去查询db

* 穿透

    缓存和db都不存在key对应的数据

* 雪崩

    大量key同时击穿


### 击穿

> 在处于集中式高并发访问的情况下，当某个热点 key 在失效的瞬间，大量的请求在缓存中获取不到。瞬间击穿了缓存，所有请求直接打到数据库，就像是在一道屏障上击穿了一个洞。

* 产生原因
    * Key 过期
    * Key 被内存淘汰机制淘汰

* 解决思路

    * 当请求到达 Redis 发现 key 已经过期时，进行一个操作：设置**锁**。

### 穿透


> 查询无数据时，导致缓存不生效，查询全部都落到了数据库上


* 解决思路

    * 规则排除，过滤

    * 数据库没有的也可以在缓存中设置Key:null



### 雪崩

> 大量缓存在同一时间失效，导致数据库压力大


* 解决思路

    * 随机过期时间策略，尽量让缓存失效的时间均匀分布



